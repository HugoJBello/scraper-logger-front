(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(79)},40:function(e,t,a){},67:function(e,t,a){},70:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(30),o=a.n(r),i=(a(40),a(5)),s=a(6),l=a(8),u=a(7),m=a(9),d=a(80),p=a(11),b=function(e){return{type:"scraper:updateExecutionId",payload:{executionId:e}}},v=function(){return{type:"scraper:getExecutionId"}},E=function(e){function t(e,a){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e,a))).getSelectedScrapingId=function(){return n.props.executionId?n.props.executionId.scrapingId:""},n.state={},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},c.a.createElement(d.a,{className:"navbar-brand",to:"/"},"App"),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},c.a.createElement("ul",{className:"navbar-nav mr-auto"},c.a.createElement("li",{className:"nav-item active"},c.a.createElement(d.a,{className:"nav-link",to:"/home"},"Home")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(d.a,{className:"nav-link",to:"/scraping-executions"},"Executions")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(d.a,{className:"nav-link",to:"/scraping-summaries"},"Scraping summaries"))),""!=this.props.executionId&&c.a.createElement("div",{className:"nav-item my-sm-0"},c.a.createElement("div",{className:"nav-link"},this.getSelectedScrapingId()))))}}]),t}(c.a.Component),f={onUpdateExecutionId:b,onGetExecutionId:v},h=Object(p.b)(function(e,t){return{executionId:e.executionId}},f)(E),g=a(12),x=a.n(g),O=a(15),j=a(17),I=a.n(j),N=function(e,t,a,n){var c="".concat("http://hbello.info:3001","/stateExecution/").concat(e,"?skip=").concat(a,"&limit=").concat(t,"&order=").concat(n);return I.a.get(c).then(function(e){return e.data})},w=a(14),y=(a(67),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).changeDbName=function(e){a.setState({selectedDb:e.target.value})},a.priceFormatter=function(e,t,n,r){var o=new Date(e).getTime(),i=(new Date).getTime()-o<a.state.maxDateDiff;return c.a.createElement("div",null,i&&c.a.createElement(w.a,{icon:"stroopwafel"}))},a.executionTable=function(){return c.a.createElement("div",{className:""},c.a.createElement("table",{className:"table table-striped"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"id"),c.a.createElement("th",{scope:"col"},"date"),c.a.createElement("th",{scope:"col"},"last city"),c.a.createElement("th",{scope:"col"},"last piece"),c.a.createElement("th",{scope:"col"},"state"))),c.a.createElement("tbody",null,a.state.retrievedExec.map(function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",{scope:"row"}," ",c.a.createElement("a",{onClick:a.selectScrapingId,name:t},e.scrapingId)),c.a.createElement("td",{className:"big-cell"},e.date),c.a.createElement("td",null,e.lastNmun),c.a.createElement("td",null,e.lastPart),c.a.createElement("td",null,a.getActiveIcon(e)))}))))},a.selectScrapingId=function(e){console.log(e.target.name);var t=a.state.retrievedExec[parseInt(e.target.name)];a.onUpdateExecutionId(t)},a.getActiveIcon=function(e){var t=new Date(e.date).getTime(),n=(new Date).getTime()-t<a.state.maxDateDiff;return c.a.createElement("div",null,n&&c.a.createElement(w.a,{icon:"stroopwafel"}))},a.onUpdateExecutionId=function(e){a.props.onUpdateExecutionId(e)},a.state={selectedDb:"state-execution-fotocasa-scraping",dbNames:["state-execution-fotocasa-scraping","state-execution-airbnb-scraping"],limit:100,skip:0,order:-1,maxDateDiff:12e5,retrievedExec:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(x.a.mark(function e(){var t,a=this;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,setInterval(Object(O.a)(x.a.mark(function e(){var n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t.state.selectedDb,t.state.limit,t.state.skip,t.state.order);case 2:n=e.sent,a.setState({retrievedExec:n}),console.log(t.state);case 5:case"end":return e.stop()}},e,this)})),1e3);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("h2",null,"Scraping executions"),c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"form-inline col-sm-6 col-lg-3"},c.a.createElement("label",{for:"sel1"},"Select database:"),c.a.createElement("select",{class:"form-control",id:"sel1",onChange:this.changeDbName},this.state.dbNames.map(function(e){return c.a.createElement("option",{value:e},e)})))),c.a.createElement("br",null),this.executionTable())}}]),t}(n.Component)),k={onUpdateExecutionId:b,onGetExecutionId:v},D=Object(p.b)(function(e){return{scrapingId:e.scrapingId}},k)(y),S=function(e,t,a){var n="".concat("http://hbello.info:3001","/summaries/").concat(e,"?skip=").concat(a,"&limit=").concat(t);return I.a.get(n).then(function(e){return e.data})},_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={dbName:"summaries-fotocasa-scraping",limit:1,skip:0,order:-1,maxDateDiff:12e5,retrievedExec:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(this.state.dbName,this.state.limit,this.state.skip,this.state.order);case 2:t=e.sent,this.setState({retrievedExec:t}),console.log(this.state);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",null,"Scraping summaries")}}]),t}(n.Component),C={onUpdateExecutionId:b,onGetExecutionId:v},T=Object(p.b)(function(e){return{scrapingId:e.scrapingId}},C)(_),U=a(82),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null)}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(U.a,{path:"/scraping-executions",component:D}),c.a.createElement(U.a,{path:"/home",component:A}),c.a.createElement(U.a,{path:"/scraping-summaries",component:T}))}}]),t}(n.Component),G=a(81),B=(a(70),a(13)),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"scraper:updateScraperSummary":return t.payload.scraper;case"scraper:getScraperSummary":default:return e}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"scraper:updateExecutionId":return t.payload.executionId;case"scraper:getExecutionId":default:return e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"summaries-fotocasa-scraping",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"scraper:updateDbName":return t.payload.dbName;case"scraper:getDbName":default:return e}},R=Object(B.b)({scraperSummary:J,executionId:L,dbName:M}),V=a(16),W=a(34);V.b.add(W.a);var F=Object(B.c)(R,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),H=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement(p.a,{store:F},c.a.createElement("div",{className:"App"},c.a.createElement(G.a,null,c.a.createElement("div",null,c.a.createElement(h,null),c.a.createElement(X,null)))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(72),a(74),a(77);o.a.render(c.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,2,1]]]);
//# sourceMappingURL=main.a4a330c7.chunk.js.map